<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>whatFile2</title>
	<style>
		.hidden{
			display:none;
		}
	</style>
</head>
<body>
<form id = 'login-form' class = 'hidden'> 
	<!-- class = 'hiiden'은 잠글뿐이다. -->
<input required maxlength="15" type="text" placeholder = 'What is your name?'/>
	</form> 
	<h1 id = 'greeting' class = 'hidden'></h1>
	<script>

		const loginInput = document.querySelector('#login-form input')
		const loginForm = document.querySelector('#login-form')
		const greeting = document.querySelector('#greeting')
		const HIIDEN_CLASSNAME = 'hidden'
        const USERNAME = 'username'
        
		function onLoginSubmit(tomato){
            const username = loginInput.value    
			event.preventDefault(); // 브라우저의 기본 동작을 막는다
			loginForm.classList.add(HIIDEN_CLASSNAME); // classname을 추가하기.
			localStorage.setItem(USERNAME,username);  // localStorage에 유저의 이름을 추가하기
			// greeting.innerText = `Hello ${username}`;
			// greeting.classList.remove(HIIDEN_CLASSNAME)
            paintGreeting(username) // 
		}
		
		loginForm.addEventListener('submit',onLoginSubmit)

        const saveUserName= localStorage.getItem(USERNAME); // localStorage는 작은 DB
        console.log(saveUserName);
        
        function paintGreeting(username){
            greeting.classList.remove(HIIDEN_CLASSNAME); // 클래스이름인 hidden을 없애기
            greeting.innerText =`Hello ${username}`; // id 이름이 greeting인 것에 텍스트를 추가하기.
        }

        if (saveUserName === null){
            // show the form
            loginForm.classList.remove(HIIDEN_CLASSNAME); 
            loginForm.addEventListener('submit',onLoginSubmit);
        }else{
            // show the greetings
            // greeting.classList.remove(HIIDEN_CLASSNAME);
            // greeting.innerText =`Hello ${saveUserName}`;
            paintGreeting(saveUserName);
        }
		
		// 로컬스토리지에 저장하는법 localStorage.setItem(key,value);
        // localStorage.getItem() 로컬스토리지에있는 키값을 받아오는 코드
//		handleLinkClick( information about the event thatr just happend)
	</script>
</body>
</html>